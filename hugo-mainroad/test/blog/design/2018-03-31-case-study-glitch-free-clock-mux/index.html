<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Case Study: Glitch Free Clock Mux - Mainroad</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Case Study: Glitch Free Clock Mux" />
<meta property="og:description" content="If your design needs to switch from one clock source to another, there is high possibility of harmful clock glitches while switching. Normally you need to stop this clock during the switching process, but what if you design relies on non-stop clock? Here is the circuit proven to work on silicon.
Techniques to make clock switching glitch free
We used it in our 28nm TSMC HPC&#43; chip, after we carefully simulated it with HSPICE." />
<meta property="og:type" content="article" />
<meta property="og:url" content="//localhost:1313/blog/design/2018-03-31-case-study-glitch-free-clock-mux/" />
<meta property="article:published_time" content="2018-03-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-03-31T00:00:00+00:00" />

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/favicon.ico">
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Mainroad" rel="home">
				<div class="logo__title">Mainroad</div>
				<div class="logo__tagline">Just another site</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">About Me</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/project/">
				
				<span class="menu__text">My Projects</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/blog/">
				
				<span class="menu__text">Blog</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Case Study: Glitch Free Clock Mux</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2018-03-31T00:00:00Z">March 31, 2018</time></div></div>
		</header><div class="content post__content clearfix">
			<p>If your design needs to switch from one clock source to another, there is high possibility of harmful clock glitches while switching. Normally you need to stop this clock during the switching process, but what if you design relies on non-stop clock? Here is the circuit proven to work on silicon.</p>
<p><a href="https://www.eetimes.com/document.asp?doc_id=1202359">Techniques to make clock switching glitch free</a></p>
<p><img src="mahmud3.jpg" alt="img"></p>
<p>We used it in our 28nm TSMC HPC+ chip, after we carefully simulated it with HSPICE. If possible, make it a hard macro. But if you cannot do that, ask the back-end engineers to</p>
<ol>
<li>Hand place them in a isolated area with lots of decap cells surrounding.</li>
<li>Hand route the signals with shielding</li>
</ol>
<p>For timing analysis</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tcl" data-lang="tcl">set_case_analysis <span style="color:#ae81ff">1</span> CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/</span>sel<span style="color:#66d9ef">;</span> <span style="color:#75715e"># selecting clk1 for this scenario
</span><span style="color:#75715e"></span>set_case_analysis <span style="color:#ae81ff">0</span> CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/</span>DF_SEL_CLK0_D2<span style="color:#f92672">/</span>Q<span style="color:#66d9ef">;</span> <span style="color:#75715e"># constant after sync
</span><span style="color:#75715e"></span>set_case_analysis <span style="color:#ae81ff">1</span> CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/</span>DF_SEL_CLK0_D2<span style="color:#f92672">/</span>QN<span style="color:#66d9ef">;</span> <span style="color:#75715e"># constant after sync
</span><span style="color:#75715e"></span>set_case_analysis <span style="color:#ae81ff">1</span> CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/</span>DF_SEL_CLK1_D2<span style="color:#f92672">/</span>Q<span style="color:#66d9ef">;</span> <span style="color:#75715e"># constant after sync
</span><span style="color:#75715e"></span>set_case_analysis <span style="color:#ae81ff">0</span> CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/</span>DF_SEL_CLK1_D2<span style="color:#f92672">/</span>QN<span style="color:#66d9ef">;</span> <span style="color:#75715e"># constant after sync
</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
set_dont_touch <span style="color:#66d9ef">[</span>get_cells CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#66d9ef">]</span>
set_dont_touch <span style="color:#66d9ef">[</span>get_nets <span style="color:#f92672">-</span>of <span style="color:#66d9ef">[</span>get_cells CORE<span style="color:#f92672">/</span>CLK_SEL<span style="color:#f92672">/*</span><span style="color:#66d9ef">]</span> <span style="color:#f92672">-</span>segments<span style="color:#66d9ef">]</span>
</code></pre></div>
		</div>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="John Doe avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About John Doe</span>
	</div>
	<div class="authorbox__description">
		John Doe&rsquo;s true identity is unknown. Maybe he is a successful blogger or writer. Nobody knows it.
	</div>
</div>

<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/blog/note/2017-05-17-python-design-patterns-note/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Course Note of *Python: Design Patterns*</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/blog/tool/2018-10-01-docker-tips/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Docker for EDA</p>
		</a>
	</div>
</nav>



			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="//localhost:1313/" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/blog/tool/test-hugo/">Test MainRoad Theme</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/tech-lead/2020-02-17-how-to-become-a-multiplier/">How to become a multiplier?</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/tech-lead/2020-02-17-improve-engineering-leadership/">Improve in engineering leadership?</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/arch/2019-11-28-riscv-architecture-training/list/">[RISC-V Architecture Training] Dec. 2019 verion: Full List</a></li>
			<li class="widget__item"><a class="widget__link" href="/blog/arch/2019-11-28-riscv-architecture-training/lecture-20-isa-basic/">[RISC-V Architecture Training] Basics &amp; Unprivileged Specification</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/arch/">arch</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/architecture/">architecture</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/design/">design</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/flow/">flow</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/industry/">industry</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/life/">life</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/low-power/">low-power</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/ml/">ML</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/note/">note</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/pm/">PM</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/riscv/">riscv</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/tech-lead/">tech-lead</a>
			</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/tool/">tool</a>
			</li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 Mainroad.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>